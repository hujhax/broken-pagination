$(function() {
    $('button').click(function() {
        var lorem = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce lacinia vel libero et faucibus. Quisque ligula justo, sodales eget ornare a, congue ac ante. Aenean euismod odio eu nisi tincidunt rhoncus. Fusce auctor ex nulla, eget iaculis nulla gravida at. Suspendisse dictum libero eget neque accumsan, ut accumsan enim iaculis. Nunc luctus nulla nec neque suscipit viverra. Aenean ut libero interdum, hendrerit velit eget, imperdiet orci. Curabitur feugiat viverra est, vel venenatis risus euismod in. Ut nunc massa, ultrices et magna nec, ultrices eleifend mi. Sed efficitur libero vel erat pretium facilisis sit amet egestas lorem. Nam pretium porttitor eros sed finibus. In quis justo porttitor, congue ipsum ut, pharetra lacus. Nam malesuada molestie orci, et venenatis libero luctus et. Proin viverra nisl est, et feugiat leo ornare at. Vestibulum vel magna eget urna blandit faucibus et et tortor. Sed non elit non lectus eleifend gravida.\nCras fermentum varius mollis. Curabitur nec convallis risus, sit amet rutrum dui. Donec pulvinar sagittis magna, vel rutrum arcu. Nullam elit arcu, placerat quis diam ac, aliquam pretium mauris. Aliquam erat volutpat. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus viverra, metus id scelerisque accumsan, mi felis interdum lacus, in hendrerit ligula risus eget dolor. Pellentesque nibh augue, elementum pretium rutrum at, efficitur eu diam.\nNam nec ante sapien. In a fringilla arcu. Ut lobortis iaculis enim vel aliquet. Quisque eget quam id lectus sagittis volutpat ut non eros. Donec at dapibus sapien, scelerisque convallis lorem. Nam at quam condimentum est sollicitudin venenatis. Donec bibendum turpis diam, non ultrices quam ultricies quis. Maecenas ultrices, est vel tincidunt blandit, odio dui accumsan nunc, id dictum ligula erat eu nisi. In id ornare erat, non iaculis lectus. Sed ut posuere mauris. Vestibulum aliquet nunc ut aliquam feugiat. Phasellus varius vestibulum risus et imperdiet. Pellentesque consectetur ipsum ipsum, at commodo magna faucibus ut.\nSuspendisse potenti. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nam fermentum, sapien vitae porta interdum, nibh sapien eleifend risus, eu venenatis eros ex nec nisl. Cras bibendum lorem at cursus semper. Vestibulum at libero at tellus placerat vestibulum a in orci. Mauris pellentesque vehicula tellus vel tristique. Sed porta pretium augue nec hendrerit. Quisque tempor magna elit, sed tincidunt ligula interdum in. Etiam ipsum sem, pulvinar vel nisi in, tempus volutpat tortor. Aliquam convallis venenatis mi, sed fermentum orci pulvinar vel. Mauris in hendrerit nisi.\nDuis urna mi, faucibus non augue nec, mattis varius diam. Quisque et gravida metus. Maecenas malesuada gravida metus, non tincidunt arcu feugiat id. Etiam ullamcorper eros justo, sed sodales eros auctor et. Suspendisse facilisis mi turpis, id feugiat libero vestibulum sed. Morbi tincidunt neque vitae imperdiet sodales. Cras non pulvinar ligula, nec viverra massa. Donec pulvinar rutrum euismod. Cras dictum, diam quis convallis dictum, eros augue fringilla orci, at maximus arcu erat eu lectus. Curabitur faucibus, lectus ut dignissim luctus, ipsum ligula blandit nisl, ut ornare purus tortor et risus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Morbi gravida erat libero, in vulputate mi fringilla nec. Fusce vitae felis vel purus lacinia luctus. Quisque at consequat diam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce lacinia vel libero et faucibus. Quisque ligula justo, sodales eget ornare a, congue ac ante. Aenean euismod odio eu nisi tincidunt rhoncus. Fusce auctor ex nulla, eget iaculis nulla gravida at. Suspendisse dictum libero eget neque accumsan, ut accumsan enim iaculis. Nunc luctus nulla nec neque suscipit viverra. Aenean ut libero interdum, hendrerit velit eget, imperdiet orci. Curabitur feugiat viverra est, vel venenatis risus euismod in. Ut nunc massa, ultrices et magna nec, ultrices eleifend mi. Sed efficitur libero vel erat pretium facilisis sit amet egestas lorem. Nam pretium porttitor eros sed finibus. In quis justo porttitor, congue ipsum ut, pharetra lacus. Nam malesuada molestie orci, et venenatis libero luctus et. Proin viverra nisl est, et feugiat leo ornare at. Vestibulum vel magna eget urna blandit faucibus et et tortor. Sed non elit non lectus eleifend gravida.\nCras fermentum varius mollis. Curabitur nec convallis risus, sit amet rutrum dui. Donec pulvinar sagittis magna, vel rutrum arcu. Nullam elit arcu, placerat quis diam ac, aliquam pretium mauris. Aliquam erat volutpat. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus viverra, metus id scelerisque accumsan, mi felis interdum lacus, in hendrerit ligula risus eget dolor. Pellentesque nibh augue, elementum pretium rutrum at, efficitur eu diam.\nNam nec ante sapien. In a fringilla arcu. Ut lobortis iaculis enim vel aliquet. Quisque eget quam id lectus sagittis volutpat ut non eros. Donec at dapibus sapien, scelerisque convallis lorem. Nam at quam condimentum est sollicitudin venenatis. Donec bibendum turpis diam, non ultrices quam ultricies quis. Maecenas ultrices, est vel tincidunt blandit, odio dui accumsan nunc, id dictum ligula erat eu nisi. In id ornare erat, non iaculis lectus. Sed ut posuere mauris. Vestibulum aliquet nunc ut aliquam feugiat. Phasellus varius vestibulum risus et imperdiet. Pellentesque consectetur ipsum ipsum, at commodo magna faucibus ut.\nSuspendisse potenti. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nam fermentum, sapien vitae porta interdum, nibh sapien eleifend risus, eu venenatis eros ex nec nisl. Cras bibendum lorem at cursus semper. Vestibulum at libero at tellus placerat vestibulum a in orci. Mauris pellentesque vehicula tellus vel tristique. Sed porta pretium augue nec hendrerit. Quisque tempor magna elit, sed tincidunt ligula interdum in. Etiam ipsum sem, pulvinar vel nisi in, tempus volutpat tortor. Aliquam convallis venenatis mi, sed fermentum orci pulvinar vel. Mauris in hendrerit nisi.\nDuis urna mi, faucibus non augue nec, mattis varius diam. Quisque et gravida metus. Maecenas malesuada gravida metus, non tincidunt arcu feugiat id. Etiam ullamcorper eros justo, sed sodales eros auctor et. Suspendisse facilisis mi turpis, id feugiat libero vestibulum sed. Morbi tincidunt neque vitae imperdiet sodales. Cras non pulvinar ligula, nec viverra massa. Donec pulvinar rutrum euismod. Cras dictum, diam quis convallis dictum, eros augue fringilla orci, at maximus arcu erat eu lectus. Curabitur faucibus, lectus ut dignissim luctus, ipsum ligula blandit nisl, ut ornare purus tortor et risus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Morbi gravida erat libero, in vulputate mi fringilla nec. Fusce vitae felis vel purus lacinia luctus. Quisque at consequat diam. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce lacinia vel libero et faucibus. Quisque ligula justo, sodales eget ornare a, congue ac ante. Aenean euismod odio eu nisi tincidunt rhoncus. Fusce auctor ex nulla, eget iaculis nulla gravida at. Suspendisse dictum libero eget neque accumsan, ut accumsan enim iaculis. Nunc luctus nulla nec neque suscipit viverra. Aenean ut libero interdum, hendrerit velit eget, imperdiet orci. Curabitur feugiat viverra est, vel venenatis risus euismod in. Ut nunc massa, ultrices et magna nec, ultrices eleifend mi. Sed efficitur libero vel erat pretium facilisis sit amet egestas lorem. Nam pretium porttitor eros sed finibus. In quis justo porttitor, congue ipsum ut, pharetra lacus. Nam malesuada molestie orci, et venenatis libero luctus et. Proin viverra nisl est, et feugiat leo ornare at. Vestibulum vel magna eget urna blandit faucibus et et tortor. Sed non elit non lectus eleifend gravida.\nCras fermentum varius mollis. Curabitur nec convallis risus, sit amet rutrum dui. Donec pulvinar sagittis magna, vel rutrum arcu. Nullam elit arcu, placerat quis diam ac, aliquam pretium mauris. Aliquam erat volutpat. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus viverra, metus id scelerisque accumsan, mi felis interdum lacus, in hendrerit ligula risus eget dolor. Pellentesque nibh augue, elementum pretium rutrum at, efficitur eu diam.\nNam nec ante sapien. In a fringilla arcu. Ut lobortis iaculis enim vel aliquet. Quisque eget quam id lectus sagittis volutpat ut non eros. Donec at dapibus sapien, scelerisque convallis lorem. Nam at quam condimentum est sollicitudin venenatis. Donec bibendum turpis diam, non ultrices quam ultricies quis. Maecenas ultrices, est vel tincidunt blandit, odio dui accumsan nunc, id dictum ligula erat eu nisi. In id ornare erat, non iaculis lectus. Sed ut posuere mauris. Vestibulum aliquet nunc ut aliquam feugiat. Phasellus varius vestibulum risus et imperdiet. Pellentesque consectetur ipsum ipsum, at commodo magna faucibus ut.\nSuspendisse potenti. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nam fermentum, sapien vitae porta interdum, nibh sapien eleifend risus, eu venenatis eros ex nec nisl. Cras bibendum lorem at cursus semper. Vestibulum at libero at tellus placerat vestibulum a in orci. Mauris pellentesque vehicula tellus vel tristique. Sed porta pretium augue nec hendrerit. Quisque tempor magna elit, sed tincidunt ligula interdum in. Etiam ipsum sem, pulvinar vel nisi in, tempus volutpat tortor. Aliquam convallis venenatis mi, sed fermentum orci pulvinar vel. Mauris in hendrerit nisi.\nDuis urna mi, faucibus non augue nec, mattis varius diam. Quisque et gravida metus. Maecenas malesuada gravida metus, non tincidunt arcu feugiat id. Etiam ullamcorper eros justo, sed sodales eros auctor et. Suspendisse facilisis mi turpis, id feugiat libero vestibulum sed. Morbi tincidunt neque vitae imperdiet sodales. Cras non pulvinar ligula, nec viverra massa. Donec pulvinar rutrum euismod. Cras dictum, diam quis convallis dictum, eros augue fringilla orci, at maximus arcu erat eu lectus. Curabitur faucibus, lectus ut dignissim luctus, ipsum ligula blandit nisl, ut ornare purus tortor et risus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Morbi gravida erat libero, in vulputate mi fringilla nec. Fusce vitae felis vel purus lacinia luctus. Quisque at consequat diam.";

        var horizontalRule = {canvas: [{ type: 'line', x1: 0, y1: 5, x2: 595-2*40, y2: 5, lineWidth: 3 }]};

        var doc = {
            content: [horizontalRule, lorem, horizontalRule, lorem]
        };

        pdfMake.createPdf(doc).download('broken.pdf');
    });
});
